function Bn(d,E){for(var _=0;_<E.length;_++){const b=E[_];if(typeof b!="string"&&!Array.isArray(b)){for(const w in b)if(w!=="default"&&!(w in d)){const D=Object.getOwnPropertyDescriptor(b,w);D&&Object.defineProperty(d,w,D.get?D:{enumerable:!0,get:()=>b[w]})}}}return Object.freeze(Object.defineProperty(d,Symbol.toStringTag,{value:"Module"}))}var Fe={};(function(){var d=function(e){var t=e,n=function(){return t},r=function(a){t=a};return{get:n,set:r}},E=tinymce.util.Tools.resolve("tinymce.PluginManager"),_=function(e){return e.hasPlugin("powerpaste",!0)?(typeof window.console!="undefined"&&window.console.log&&window.console.log("PowerPaste is incompatible with Paste plugin! Remove 'paste' from the 'plugins' option."),!0):!1},b=function(e){return{clipboard:e}},w=function(e){var t=typeof e;return e===null?"null":t==="object"&&(Array.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="Array")?"array":t==="object"&&(String.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="String")?"string":t},D=function(e){return function(t){return w(t)===e}},Re=function(e){return function(t){return typeof t===e}},je=D("array"),Ie=function(e){return e==null},j=function(e){return!Ie(e)},$e=Re("function"),I=function(){},x=function(e){return function(){return e}},Le=function(e){return e},$=x(!1),L=x(!0),O=function(){return H},H=function(){var e=function(r){return r()},t=Le,n={fold:function(r,a){return r()},isSome:$,isNone:L,getOr:t,getOrThunk:e,getOrDie:function(r){throw new Error(r||"error: getOrDie called on none.")},getOrNull:x(null),getOrUndefined:x(void 0),or:t,orThunk:e,map:O,each:I,bind:O,exists:$,forall:L,filter:function(){return O()},toArray:function(){return[]},toString:x("none()")};return n}(),B=function(e){var t=x(e),n=function(){return a},r=function(i){return i(e)},a={fold:function(i,o){return o(e)},isSome:L,isNone:$,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:n,orThunk:n,map:function(i){return B(i(e))},each:function(i){i(e)},bind:r,exists:r,forall:r,filter:function(i){return i(e)?a:H},toArray:function(){return[e]},toString:function(){return"some("+e+")"}};return a},He=function(e){return e==null?H:B(e)},M={some:B,none:O,from:He},Be=Array.prototype.slice,Me=Array.prototype.push,Y=function(e,t){for(var n=0,r=e.length;n<r;n++){var a=e[n];if(t(a,n))return!0}return!1},Z=function(e,t){for(var n=e.length,r=new Array(n),a=0;a<n;a++){var i=e[a];r[a]=t(i,a)}return r},J=function(e,t){for(var n=0,r=e.length;n<r;n++){var a=e[n];t(a,n)}},Ne=function(e,t){for(var n=[],r=0,a=e.length;r<a;r++){var i=e[r];t(i,r)&&n.push(i)}return n},Ue=function(e,t,n){return J(e,function(r,a){n=t(n,r,a)}),n},We=function(e){for(var t=[],n=0,r=e.length;n<r;++n){if(!je(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);Me.apply(t,e[n])}return t},ze=function(e,t){return We(Z(e,t))},Q=$e(Array.from)?Array.from:function(e){return Be.call(e)},A=function(){return A=Object.assign||function(t){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},A.apply(this,arguments)},Ke=function(e){var t=d(M.none()),n=function(){return t.get().each(e)},r=function(){n(),t.set(M.none())},a=function(){return t.get().isSome()},i=function(){return t.get()},o=function(c){n(),t.set(M.some(c))};return{clear:r,isSet:a,get:i,set:o}},ee=function(){var e=Ke(I),t=function(n){return e.get().each(n)};return A(A({},e),{on:t})},te=function(e,t,n){return t===""||e.length>=t.length&&e.substr(n,n+t.length)===t},Ve=function(e,t){return te(e,t,0)},Xe=function(e,t){return te(e,t,e.length-t.length)},qe=function(e,t){return t<=0?"":new Array(t+1).join(e)},y=tinymce.util.Tools.resolve("tinymce.Env"),F=tinymce.util.Tools.resolve("tinymce.util.Delay"),ne=tinymce.util.Tools.resolve("tinymce.util.Promise"),Ge=tinymce.util.Tools.resolve("tinymce.util.VK"),Ye=function(e,t,n,r){return e.fire("PastePreProcess",{content:t,internal:n,wordContent:r})},Ze=function(e,t,n,r){return e.fire("PastePostProcess",{node:t,internal:n,wordContent:r})},re=function(e,t){return e.fire("PastePlainTextToggle",{state:t})},Je=function(e,t){return e.fire("paste",{ieFake:t})},h=tinymce.util.Tools.resolve("tinymce.util.Tools"),Qe=function(e){return e.getParam("paste_block_drop",!1)},ae=function(e){return e.getParam("paste_data_images",!1)},et=function(e){return e.getParam("paste_filter_drop",!0)},tt=function(e){return e.getParam("paste_preprocess")},nt=function(e){return e.getParam("paste_postprocess")},rt=function(e){return e.getParam("paste_webkit_styles")},at=function(e){return e.getParam("paste_remove_styles_if_webkit",!0)},it=function(e){return e.getParam("paste_merge_formats",!0)},st=function(e){return e.getParam("smart_paste",!0)},ut=function(e){return e.getParam("paste_as_text",!1)},ie=function(e){return e.getParam("paste_retain_style_properties")},ot=function(e){var t="-strong/b,-em/i,-u,-span,-p,-ol,-ul,-li,-h1,-h2,-h3,-h4,-h5,-h6,-p/div,-a[href|name],sub,sup,strike,br,del,table[width],tr,td[colspan|rowspan|width],th[colspan|rowspan|width],thead,tfoot,tbody";return e.getParam("paste_word_valid_elements",t)},lt=function(e){return e.getParam("paste_convert_word_fake_lists",!0)},ft=function(e){return e.getParam("paste_enable_default_filters",!0)},se=function(e){return e.getParam("validate")},ct=function(e){return e.getParam("allow_html_data_urls",!1,"boolean")},ue=function(e){return e.getParam("paste_data_images",!1,"boolean")},vt=function(e){return e.getParam("images_dataimg_filter")},gt=function(e){return e.getParam("images_reuse_filename")},mt=function(e){return e.getParam("forced_root_block")},pt=function(e){return e.getParam("forced_root_block_attrs")},ht=function(e){return e.getParam("paste_tab_spaces",4,"number")},oe=function(e){var t="jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp";return h.explode(e.getParam("images_file_types",t,"string"))},le="x-tinymce/html",N="<!-- "+le+" -->",yt=function(e){return N+e},dt=function(e){return e.replace(N,"")},U=function(e){return e.indexOf(N)!==-1},W=x(le),Pt=Object.hasOwnProperty,bt=function(e,t){return Pt.call(e,t)},wt=tinymce.util.Tools.resolve("tinymce.html.Entities"),xt=function(e){return!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e)},Ct=function(e){return e.replace(/\r?\n/g,"<br>")},kt=function(e,t){var n=[],r="<"+e;if(typeof t=="object"){for(var a in t)bt(t,a)&&n.push(a+'="'+wt.encodeAllRaw(t[a])+'"');n.length&&(r+=" "+n.join(" "))}return r+">"},_t=function(e,t,n){var r=e.split(/\n\n/),a=kt(t,n),i="</"+t+">",o=h.map(r,function(s){return s.split(/\n/).join("<br />")}),c=function(s){return a+s+i};return o.length===1?o[0]:h.map(o,c).join("")},Dt=function(e,t,n){return t?_t(e,t===!0?"p":t,n):Ct(e)},z=tinymce.util.Tools.resolve("tinymce.html.DomParser"),fe=tinymce.util.Tools.resolve("tinymce.html.Serializer"),T="Â ",K=tinymce.util.Tools.resolve("tinymce.html.Node"),ce=tinymce.util.Tools.resolve("tinymce.html.Schema"),Tt=function(e){return e.constructor===RegExp},S=function(e,t){return h.each(t,function(n){Tt(n)?e=e.replace(n,""):e=e.replace(n[0],n[1])}),e},St=function(e){var t=ce(),n=z({},t),r="",a=t.getShortEndedElements(),i=h.makeMap("script noscript style textarea video audio iframe object"," "),o=t.getBlockElements(),c=function(s){var u=s.name,l=s;if(u==="br"){r+=`
`;return}if(u!=="wbr"){if(a[u]&&(r+=" "),i[u]){r+=" ";return}if(s.type===3&&(r+=s.value),!s.shortEnded&&(s=s.firstChild))do c(s);while(s=s.next);o[u]&&l.next&&(r+=`
`,u==="p"&&(r+=`
`))}};return e=S(e,[/<!\[[^\]]+\]>/g]),c(n.parse(e)),r},ve=function(e){var t=function(n,r,a){return!r&&!a?" ":T};return e=S(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/ig,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,t],/<br class="Apple-interchange-newline">/g,/<br>$/i]),e},Et=function(e){var t=0;return function(){return e+t++}},Ot=function(e){var t=e.toLowerCase(),n={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return h.hasOwn(n,t)?"image/"+n[t]:"image/"+t},ge=function(e){return/<font face="Times New Roman"|class="?Mso|style="[^"]*\bmso-|style='[^']*\bmso-|w:WordDocument/i.test(e)||/class="OutlineElement/.test(e)||/id="?docs\-internal\-guid\-/.test(e)},At=function(e){var t=!1,n=[/^[IVXLMCD]+\.[ \u00a0]/,/^[ivxlmcd]+\.[ \u00a0]/,/^[a-z]{1,2}[\.\)][ \u00a0]/,/^[A-Z]{1,2}[\.\)][ \u00a0]/,/^[0-9]+\.[ \u00a0]/,/^[\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]+\.[ \u00a0]/,/^[\u58f1\u5f10\u53c2\u56db\u4f0d\u516d\u4e03\u516b\u4e5d\u62fe]+\.[ \u00a0]/];return e=e.replace(/^[\u00a0 ]+/,""),h.each(n,function(r){if(r.test(e))return t=!0,!1}),t},Ft=function(e){return/^[\s\u00a0]*[\u2022\u00b7\u00a7\u25CF]\s*/.test(e)},Rt=function(e){for(var t,n,r=1,a=function(f){var p="";if(f.type===3)return f.value;if(f=f.firstChild)do p+=a(f);while(f=f.next);return p},i=function(f,p){if(f.type===3&&p.test(f.value))return f.value=f.value.replace(p,""),!1;if(f=f.firstChild)do if(!i(f,p))return!1;while(f=f.next);return!0},o=function(f){if(f._listIgnore){f.remove();return}if(f=f.firstChild)do o(f);while(f=f.next)},c=function(f,p,k){var C=f._listLevel||r;C!==r&&(C<r?t&&(t=t.parent.parent):(n=t,t=null)),!t||t.name!==p?(n=n||t,t=new K(p,1),k>1&&t.attr("start",""+k),f.wrap(t)):t.append(f),f.name="li",C>r&&n&&n.lastChild.append(t),r=C,o(f),i(f,/^\u00a0+/),i(f,/^\s*([\u2022\u00b7\u00a7\u25CF]|\w+\.)/),i(f,/^\u00a0+/)},s=[],u=e.firstChild;typeof u!="undefined"&&u!==null;)if(s.push(u),u=u.walk(),u!==null)for(;typeof u!="undefined"&&u.parent!==e;)u=u.walk();for(var l=0;l<s.length;l++)if(e=s[l],e.name==="p"&&e.firstChild){var v=a(e);if(Ft(v)){c(e,"ul");continue}if(At(v)){var g=/([0-9]+)\./.exec(v),m=1;g&&(m=parseInt(g[1],10)),c(e,"ol",m);continue}if(e._listLevel){c(e,"ul",1);continue}t=null}else n=t,t=null},jt=function(e,t,n,r){var a={},i=e.dom.parseStyle(r);h.each(i,function(c,s){switch(s){case"mso-list":var u=/\w+ \w+([0-9]+)/i.exec(r);u&&(n._listLevel=parseInt(u[1],10)),/Ignore/i.test(c)&&n.firstChild&&(n._listIgnore=!0,n.firstChild._listIgnore=!0);break;case"horiz-align":s="text-align";break;case"vert-align":s="vertical-align";break;case"font-color":case"mso-foreground":s="color";break;case"mso-background":case"mso-highlight":s="background";break;case"font-weight":case"font-style":c!=="normal"&&(a[s]=c);return;case"mso-element":if(/^(comment|comment-list)$/i.test(c)){n.remove();return}break}if(s.indexOf("mso-comment")===0){n.remove();return}s.indexOf("mso-")!==0&&(ie(e)==="all"||t&&t[s])&&(a[s]=c)}),/(bold)/i.test(a["font-weight"])&&(delete a["font-weight"],n.wrap(new K("b",1))),/(italic)/i.test(a["font-style"])&&(delete a["font-style"],n.wrap(new K("i",1)));var o=e.dom.serializeStyle(a,n.name);return o||null},It=function(e,t){var n,r=ie(e);r&&(n=h.makeMap(r.split(/[, ]/))),t=S(t,[/<br class="?Apple-interchange-newline"?>/gi,/<b[^>]+id="?docs-internal-[^>]*>/gi,/<!--[\s\S]+?-->/gi,/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/>]))[^>]*>/gi,[/<(\/?)s>/gi,"<$1strike>"],[/&nbsp;/gi,T],[/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi,function(s,u){return u.length>0?u.replace(/./," ").slice(Math.floor(u.length/2)).split("").join(T):""}]]);var a=ot(e),i=ce({valid_elements:a,valid_children:"-li[p]"});h.each(i.elements,function(s){s.attributes.class||(s.attributes.class={},s.attributesOrder.push("class")),s.attributes.style||(s.attributes.style={},s.attributesOrder.push("style"))});var o=z({},i);o.addAttributeFilter("style",function(s){for(var u=s.length,l;u--;)l=s[u],l.attr("style",jt(e,n,l,l.attr("style"))),l.name==="span"&&l.parent&&!l.attributes.length&&l.unwrap()}),o.addAttributeFilter("class",function(s){for(var u=s.length,l,v;u--;)l=s[u],v=l.attr("class"),/^(MsoCommentReference|MsoCommentText|msoDel)$/i.test(v)&&l.remove(),l.attr("class",null)}),o.addNodeFilter("del",function(s){for(var u=s.length;u--;)s[u].remove()}),o.addNodeFilter("a",function(s){for(var u=s.length,l,v,g;u--;){if(l=s[u],v=l.attr("href"),g=l.attr("name"),v&&v.indexOf("#_msocom_")!==-1){l.remove();continue}if(v&&v.indexOf("file://")===0&&(v=v.split("#")[1],v&&(v="#"+v)),!v&&!g)l.unwrap();else{if(g&&!/^_?(?:toc|edn|ftn)/i.test(g)){l.unwrap();continue}l.attr({href:v,name:g})}}});var c=o.parse(t);return lt(e)&&Rt(c),t=fe({validate:se(e)},i).serialize(c),t},$t=function(e,t){return ft(e)?It(e,t):t},Lt=function(e,t){var n=z({},e.schema);n.addNodeFilter("meta",function(a){h.each(a,function(i){i.remove()})});var r=n.parse(t,{forced_root_block:!1,isRootContent:!0});return fe({validate:se(e)},e.schema).serialize(r)},me=function(e,t){return{content:e,cancelled:t}},Ht=function(e,t,n,r){var a=e.dom.create("div",{style:"display:none"},t),i=Ze(e,a,n,r);return me(i.node.innerHTML,i.isDefaultPrevented())},Bt=function(e,t,n,r){var a=Ye(e,t,n,r),i=Lt(e,a.content);return e.hasEventListeners("PastePostProcess")&&!a.isDefaultPrevented()?Ht(e,i,n,r):me(i,a.isDefaultPrevented())},Mt=function(e,t,n){var r=ge(t),a=r?$t(e,t):t;return Bt(e,a,n,r)},V=function(e,t){return e.insertContent(t,{merge:it(e),paste:!0}),!0},X=function(e){return/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e)},Nt=function(e,t){return X(t)&&Y(oe(e),function(n){return Xe(t.toLowerCase(),"."+n.toLowerCase())})},Ut=function(e,t,n){return e.undoManager.extra(function(){n(e,t)},function(){e.insertContent('<img src="'+t+'">')}),!0},Wt=function(e,t,n){return e.undoManager.extra(function(){n(e,t)},function(){e.execCommand("mceInsertLink",!1,t)}),!0},zt=function(e,t,n){return e.selection.isCollapsed()===!1&&X(t)?Wt(e,t,n):!1},Kt=function(e,t,n){return Nt(e,t)?Ut(e,t,n):!1},Vt=function(e,t){h.each([zt,Kt,V],function(n){return n(e,t,V)!==!0})},Xt=function(e,t,n){n||st(e)===!1?V(e,t):Vt(e,t)},qt=function(e){return" \f	\v".indexOf(e)!==-1},pe=function(e){return e===`
`||e==="\r"},Gt=function(e,t){return t<e.length&&t>=0?pe(e[t]):!1},Yt=function(e,t){var n=qe(" ",ht(e)),r=t.replace(/\t/g,n),a=Ue(r,function(i,o){return qt(o)||o===T?i.pcIsSpace||i.str===""||i.str.length===r.length-1||Gt(r,i.str.length+1)?{pcIsSpace:!1,str:i.str+T}:{pcIsSpace:!0,str:i.str+" "}:{pcIsSpace:pe(o),str:i.str+o}},{pcIsSpace:!1,str:""});return a.str},he=function(e,t,n,r){var a=Mt(e,t,n);a.cancelled===!1&&Xt(e,a.content,r)},R=function(e,t,n){var r=n||U(t);he(e,dt(t),r,!1)},ye=function(e,t){var n=e.dom.encode(t).replace(/\r\n/g,`
`),r=Yt(e,n),a=Dt(r,mt(e),pt(e));he(e,a,!1,!0)},de=function(e){var t={},n="data:text/mce-internal,";if(e){if(e.getData){var r=e.getData("Text");r&&r.length>0&&r.indexOf(n)===-1&&(t["text/plain"]=r)}if(e.types)for(var a=0;a<e.types.length;a++){var i=e.types[a];try{t[i]=e.getData(i)}catch(o){t[i]=""}}}return t},Zt=function(e,t){return de(t.clipboardData||e.getDoc().dataTransfer)},P=function(e,t){return t in e&&e[t].length>0},Pe=function(e){return P(e,"text/html")||P(e,"text/plain")},Jt=function(e){var t=/data:([^;]+);base64,([a-z0-9\+\/=]+)/i.exec(e);return t?{type:t[1],data:decodeURIComponent(t[2])}:{type:null,data:null}},Qt=function(e,t){var n=vt(e);return n?n(t):!0},en=function(e,t){var n=t.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return j(n)?e.dom.encode(n[1]):null},tn=Et("mceclip"),nn=function(e,t){var n=Jt(t.uri),r=n.data,a=n.type,i=tn(),o=t.blob,c=new Image;if(c.src=t.uri,Qt(e,c)){var s=e.editorUpload.blobCache,u=void 0,l=s.getByData(r,a);if(l)u=l;else{var v=gt(e)&&j(o.name),g=v?en(e,o.name):i,m=v?o.name:void 0;u=s.create(i,o,r,g,m),s.add(u)}R(e,'<img src="'+u.blobUri()+'">',!1)}else R(e,'<img src="'+t.uri+'">',!1)},rn=function(e){return e.type==="paste"},an=function(e){return j(e.getAsFile)},sn=function(e){return ne.all(Z(e,function(t){return new ne(function(n){var r=an(t)?t.getAsFile():t,a=new window.FileReader;a.onload=function(){n({blob:r,uri:a.result})},a.readAsDataURL(r)})}))},un=function(e){var t=oe(e);return function(n){return Ve(n.type,"image/")&&Y(t,function(r){return Ot(r)===n.type})}},on=function(e,t){var n=t.items?ze(Q(t.items),function(a){return a.kind==="file"?[a.getAsFile()]:[]}):[],r=t.files?Q(t.files):[];return Ne(n.length>0?n:r,un(e))},be=function(e,t,n){var r=rn(t)?t.clipboardData:t.dataTransfer;if(ue(e)&&r){var a=on(e,r);if(a.length>0)return t.preventDefault(),sn(a).then(function(i){n&&e.selection.setRng(n),J(i,function(o){nn(e,o)})}),!0}return!1},ln=function(e){var t=e.clipboardData;return navigator.userAgent.indexOf("Android")!==-1&&t&&t.items&&t.items.length===0},we=function(e){return Ge.metaKeyPressed(e)&&e.keyCode===86||e.shiftKey&&e.keyCode===45},fn=function(e,t,n){var r=ee(),a=ee(),i;e.on("keyup",a.clear),e.on("keydown",function(s){var u=function(l){we(l)&&!l.isDefaultPrevented()&&t.remove()};if(we(s)&&!s.isDefaultPrevented()){if(i=s.shiftKey&&s.keyCode===86,i&&y.webkit&&navigator.userAgent.indexOf("Version/")!==-1)return;if(s.stopImmediatePropagation(),r.set(s),a.set(!0),y.ie&&i){s.preventDefault(),Je(e,!0);return}t.remove(),t.create(),e.once("keyup",u),e.once("paste",function(){e.off("keyup",u)})}});var o=function(s,u,l,v,g){var m;P(u,"text/html")?m=u["text/html"]:(m=t.getHtml(),g=g||U(m),t.isDefaultContent(m)&&(v=!0)),m=ve(m),t.remove();var f=g===!1&&xt(m),p=X(m);if((!m.length||f&&!p)&&(v=!0),(v||p)&&(P(u,"text/plain")&&f?m=u["text/plain"]:m=St(m)),t.isDefaultContent(m)){l||s.windowManager.alert("Please use Ctrl+V/Cmd+V keyboard shortcuts to paste contents.");return}v?ye(s,m):R(s,m,g)},c=function(){return t.getLastRng()||e.selection.getRng()};e.on("paste",function(s){var u=r.isSet()||a.isSet();u&&r.clear();var l=Zt(e,s),v=n.get()==="text"||i,g=P(l,W());if(i=!1,s.isDefaultPrevented()||ln(s)){t.remove();return}if(!Pe(l)&&be(e,s,c())){t.remove();return}u||s.preventDefault(),y.ie&&(!u||s.ieFake)&&!P(l,"text/html")&&(t.create(),e.dom.bind(t.getEl(),"paste",function(m){m.stopPropagation()}),e.getDoc().execCommand("Paste",!1,null),l["text/html"]=t.getHtml()),P(l,"text/html")?(s.preventDefault(),g||(g=U(l["text/html"])),o(e,l,u,v,g)):F.setEditorTimeout(e,function(){o(e,l,u,v,g)},0)})},cn=function(e,t,n){fn(e,t,n);var r;e.parser.addNodeFilter("img",function(a,i,o){var c=function(g){return g.data&&g.data.paste===!0},s=function(g){!g.attr("data-mce-object")&&r!==y.transparentSrc&&g.remove()},u=function(g){return g.indexOf("webkit-fake-url")===0},l=function(g){return g.indexOf("data:")===0};if(!ue(e)&&c(o))for(var v=a.length;v--;)r=a[v].attr("src"),r&&(u(r)||!ct(e)&&l(r))&&s(a[v])})},q=function(e){return y.ie&&e.inline?document.body:e.getBody()},vn=function(e){return q(e)!==e.getBody()},gn=function(e,t,n){vn(e)&&e.dom.bind(t,"paste keyup",function(r){Ce(e,n)||e.fire("paste")})},mn=function(e,t,n){var r=e.dom,a=e.getBody();t.set(e.selection.getRng());var i=e.dom.add(q(e),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},n);(y.ie||y.gecko)&&r.setStyle(i,"left",r.getStyle(a,"direction",!0)==="rtl"?65535:-65535),r.bind(i,"beforedeactivate focusin focusout",function(o){o.stopPropagation()}),gn(e,i,n),i.focus(),e.selection.select(i,!0)},pn=function(e,t){if(G(e)){for(var n=void 0,r=t.get();n=e.dom.get("mcepastebin");)e.dom.remove(n),e.dom.unbind(n);r&&e.selection.setRng(r)}t.set(null)},G=function(e){return e.dom.get("mcepastebin")},hn=function(e){var t=function(c,s){c.appendChild(s),e.dom.remove(s,!0)},n=h.grep(q(e).childNodes,function(c){return c.id==="mcepastebin"}),r=n.shift();h.each(n,function(c){t(r,c)});for(var a=e.dom.select("div[id=mcepastebin]",r),i=a.length-1;i>=0;i--){var o=e.dom.create("div");r.insertBefore(o,a[i]),t(o,a[i])}return r?r.innerHTML:""},xe=function(e,t){return t===e},yn=function(e){return e&&e.id==="mcepastebin"},Ce=function(e,t){var n=G(e);return yn(n)&&xe(t,n.innerHTML)},dn=function(e){var t=d(null),n="%MCEPASTEBIN%";return{create:function(){return mn(e,t,n)},remove:function(){return pn(e,t)},getEl:function(){return G(e)},getHtml:function(){return hn(e)},getLastRng:t.get,isDefault:function(){return Ce(e,n)},isDefaultContent:function(r){return xe(n,r)}}},Pn=function(e,t){var n=dn(e);return e.on("PreInit",function(){return cn(e,n,t)}),{pasteFormat:t,pasteHtml:function(r,a){return R(e,r,a)},pasteText:function(r){return ye(e,r)},pasteImageData:function(r,a){return be(e,r,a)},getDataTransferItems:de,hasHtmlOrText:Pe,hasContentType:P}},bn=function(e,t){t.pasteFormat.get()==="text"?(t.pasteFormat.set("html"),re(e,!1)):(t.pasteFormat.set("text"),re(e,!0)),e.focus()},wn=function(e,t){e.addCommand("mceTogglePlainTextPaste",function(){bn(e,t)}),e.addCommand("mceInsertClipboardContent",function(n,r){r.content&&t.pasteHtml(r.content,r.internal),r.text&&t.pasteText(r.text)})},xn=function(e){return y.iOS===!1&&typeof(e==null?void 0:e.setData)=="function"},Cn=function(e,t,n){if(xn(e))try{return e.clearData(),e.setData("text/html",t),e.setData("text/plain",n),e.setData(W(),t),!0}catch(r){return!1}else return!1},ke=function(e,t,n,r){Cn(e.clipboardData,t.html,t.text)?(e.preventDefault(),r()):n(t.html,r)},_e=function(e){return function(t,n){var r=yt(t),a=e.dom.create("div",{contenteditable:"false","data-mce-bogus":"all"}),i=e.dom.create("div",{contenteditable:"true"},r);e.dom.setStyles(a,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),a.appendChild(i),e.dom.add(e.getBody(),a);var o=e.selection.getRng();i.focus();var c=e.dom.createRng();c.selectNodeContents(i),e.selection.setRng(c),F.setTimeout(function(){e.selection.setRng(o),a.parentNode.removeChild(a),n()},0)}},De=function(e){return{html:e.selection.getContent({contextual:!0}),text:e.selection.getContent({format:"text"})}},kn=function(e){return!!e.dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody())},Te=function(e){return!e.selection.isCollapsed()||kn(e)},_n=function(e){return function(t){Te(e)&&ke(t,De(e),_e(e),function(){if(y.browser.isChrome()||y.browser.isFirefox()){var n=e.selection.getRng();F.setEditorTimeout(e,function(){e.selection.setRng(n),e.execCommand("Delete")},0)}else e.execCommand("Delete")})}},Dn=function(e){return function(t){Te(e)&&ke(t,De(e),_e(e),I)}},Tn=function(e){e.on("cut",_n(e)),e.on("copy",Dn(e))},Sn=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),Se=function(e,t){return Sn.getCaretRangeFromPoint(t.clientX,t.clientY,e.getDoc())},En=function(e){var t=e["text/plain"];return t?t.indexOf("file://")===0:!1},Ee=function(e,t){e.focus(),e.selection.setRng(t)},On=function(e,t,n){Qe(e)&&e.on("dragend dragover draggesture dragdrop drop drag",function(r){r.preventDefault(),r.stopPropagation()}),ae(e)||e.on("drop",function(r){var a=r.dataTransfer;a&&a.files&&a.files.length>0&&r.preventDefault()}),e.on("drop",function(r){var a=Se(e,r);if(!(r.isDefaultPrevented()||n.get())){var i=t.getDataTransferItems(r.dataTransfer),o=t.hasContentType(i,W());if(!((!t.hasHtmlOrText(i)||En(i))&&t.pasteImageData(r,a))&&a&&et(e)){var c=i["mce-internal"]||i["text/html"]||i["text/plain"];c&&(r.preventDefault(),F.setEditorTimeout(e,function(){e.undoManager.transact(function(){i["mce-internal"]&&e.execCommand("Delete"),Ee(e,a),c=ve(c),i["text/html"]?t.pasteHtml(c,o):t.pasteText(c)})}))}}}),e.on("dragstart",function(r){n.set(!0)}),e.on("dragover dragend",function(r){ae(e)&&n.get()===!1&&(r.preventDefault(),Ee(e,Se(e,r))),r.type==="dragend"&&n.set(!1)})},An=function(e){var t=e.plugins.paste,n=tt(e);n&&e.on("PastePreProcess",function(a){n.call(t,t,a)});var r=nt(e);r&&e.on("PastePostProcess",function(a){r.call(t,t,a)})},Oe=function(e,t){e.on("PastePreProcess",function(n){n.content=t(e,n.content,n.internal,n.wordContent)})},Fn=function(e,t){e.on("PastePostProcess",function(n){t(e,n.node)})},Rn=function(e,t){if(!ge(t))return t;var n=[];h.each(e.schema.getBlockElements(),function(a,i){n.push(i)});var r=new RegExp("(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*(<\\/?("+n.join("|")+")[^>]*>)(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*","g");return t=S(t,[[r,"$1"]]),t=S(t,[[/<br><br>/g,"<BR><BR>"],[/<br>/g," "],[/<BR><BR>/g,"<br>"]]),t},jn=function(e,t,n,r){if(r||n)return t;var a=rt(e),i;if(at(e)===!1||a==="all")return t;if(a&&(i=a.split(/[, ]/)),i){var o=e.dom,c=e.selection.getNode();t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,function(s,u,l,v){var g=o.parseStyle(o.decode(l)),m={};if(i==="none")return u+v;for(var f=0;f<i.length;f++){var p=g[i[f]],k=o.getStyle(c,i[f],!0);/color/.test(i[f])&&(p=o.toHex(p),k=o.toHex(k)),k!==p&&(m[i[f]]=p)}var C=o.serializeStyle(m,"span");return C?u+' style="'+C+'"'+v:u+v})}else t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return t=t.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,function(s,u,l,v){return u+' style="'+l+'"'+v}),t},In=function(e,t){e.$("a",t).find("font,u").each(function(n,r){e.dom.remove(r,!0)})},$n=function(e){y.webkit&&Oe(e,jn),y.ie&&(Oe(e,Rn),Fn(e,In))},Ae=function(e,t){return function(n){n.setActive(t.pasteFormat.get()==="text");var r=function(a){return n.setActive(a.state)};return e.on("PastePlainTextToggle",r),function(){return e.off("PastePlainTextToggle",r)}}},Ln=function(e,t){var n=function(){return e.execCommand("mceTogglePlainTextPaste")};e.ui.registry.addToggleButton("pastetext",{active:!1,icon:"paste-text",tooltip:"Paste as text",onAction:n,onSetup:Ae(e,t)}),e.ui.registry.addToggleMenuItem("pastetext",{text:"Paste as text",icon:"paste-text",onAction:n,onSetup:Ae(e,t)})};function Hn(){E.add("paste",function(e){if(_(e)===!1){var t=d(!1),n=d(ut(e)?"text":"html"),r=Pn(e,n);return $n(e),Ln(e,r),wn(e,r),An(e),Tn(e),On(e,r,t),b(r)}})}Hn()})();const Mn=Bn({__proto__:null,default:Fe},[Fe]);export{Mn as i};
