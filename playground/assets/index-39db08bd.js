function De(B,I){for(var T=0;T<I.length;T++){const A=I[T];if(typeof A!="string"&&!Array.isArray(A)){for(const E in A)if(E!=="default"&&!(E in B)){const b=Object.getOwnPropertyDescriptor(A,E);b&&Object.defineProperty(B,E,b.get?b:{enumerable:!0,get:()=>A[E]})}}}return Object.freeze(Object.defineProperty(B,Symbol.toStringTag,{value:"Module"}))}var ee={};(function(){var B=function(e){var n=e,a=function(){return n},t=function(o){n=o};return{get:a,set:t}},I=tinymce.util.Tools.resolve("tinymce.PluginManager"),T=function(e){return e.hasPlugin("tinymcespellchecker",!0)?(typeof window.console!="undefined"&&window.console.log&&window.console.log("Spell Checker Pro is incompatible with Spell Checker plugin! Remove 'spellchecker' from the 'plugins' option."),!0):!1},A=Object.hasOwnProperty,E=function(e){for(var n in e)if(A.call(e,n))return!1;return!0},b=tinymce.util.Tools.resolve("tinymce.util.Tools"),ne=tinymce.util.Tools.resolve("tinymce.util.URI"),te=tinymce.util.Tools.resolve("tinymce.util.XHR"),re=function(e){return e.fire("SpellcheckStart")},ae=function(e){return e.fire("SpellcheckEnd")},le=function(e){var n="English=en,Danish=da,Dutch=nl,Finnish=fi,French=fr_FR,German=de,Italian=it,Polish=pl,Portuguese=pt_BR,Spanish=es,Swedish=sv";return e.getParam("spellchecker_languages",n)},oe=function(e){var n=e.getParam("language","en");return e.getParam("spellchecker_language",n)},L=function(e){return e.getParam("spellchecker_rpc_url")},ce=function(e){return e.getParam("spellchecker_callback")},G=function(e){var n=new RegExp('[^\\s!"#$%&()*+,-./:;<=>?@[\\]^_{|}`§©«®±¶·¸»¼½¾¿×÷¤”“„    ]+',"g");return e.getParam("spellchecker_wordchar_pattern",n)},_=function(e){return e&&e.nodeType===1&&e.contentEditable==="false"},ie=function(e,n){var a,t=[],o=n.dom,i=n.schema.getBlockElements(),s=n.schema.getWhiteSpaceElements(),p=n.schema.getShortEndedElements(),f=function(r,l){if(!r[0])throw new Error("findAndReplaceDOMText cannot handle zero-length matches");return{start:r.index,end:r.index+r[0].length,text:r[0],data:l}},g=function(r){if(r.nodeType===3)return r.data;if(s[r.nodeName]&&!i[r.nodeName])return"";if(_(r))return`
`;var l="";if((i[r.nodeName]||p[r.nodeName])&&(l+=`
`),r=r.firstChild)do l+=g(r);while(r=r.nextSibling);return l},v=function(r,l,c){var m,d,h,N,w=[],y=0,u=r,k,C=0;l=l.slice(0),l.sort(function(z,P){return z.start-P.start}),k=l.shift();e:for(;;){if((i[u.nodeName]||p[u.nodeName]||_(u))&&y++,u.nodeType===3&&(!d&&u.length+y>=k.end?(d=u,N=k.end-y):m&&w.push(u),!m&&u.length+y>k.start&&(m=u,h=k.start-y),y+=u.length),m&&d){if(u=c({startNode:m,startNodeIndex:h,endNode:d,endNodeIndex:N,innerNodes:w,match:k.text,matchIndex:C}),y-=d.length-N,m=null,d=null,w=[],k=l.shift(),C++,!k)break}else if((!s[u.nodeName]||i[u.nodeName])&&u.firstChild){if(!_(u)){u=u.firstChild;continue}}else if(u.nextSibling){u=u.nextSibling;continue}for(;;)if(u.nextSibling){u=u.nextSibling;break}else if(u.parentNode!==r)u=u.parentNode;else break e}},x=function(r){var l=function(c,m){var d=t[m];d.stencil||(d.stencil=r(d));var h=d.stencil.cloneNode(!1);return h.setAttribute("data-mce-index",""+m),c&&h.appendChild(o.doc.createTextNode(c)),h};return function(c){var m,d,h,N=c.startNode,w=c.endNode,y=c.matchIndex,u=o.doc;if(N===w){var k=N;h=k.parentNode,c.startNodeIndex>0&&(m=u.createTextNode(k.data.substring(0,c.startNodeIndex)),h.insertBefore(m,k));var C=l(c.match,y);return h.insertBefore(C,k),c.endNodeIndex<k.length&&(d=u.createTextNode(k.data.substring(c.endNodeIndex)),h.insertBefore(d,k)),k.parentNode.removeChild(k),C}m=u.createTextNode(N.data.substring(0,c.startNodeIndex)),d=u.createTextNode(w.data.substring(c.endNodeIndex));for(var z=l(N.data.substring(c.startNodeIndex),y),P=0,Ie=c.innerNodes.length;P<Ie;++P){var J=c.innerNodes[P],Oe=l(J.data,y);J.parentNode.replaceChild(Oe,J)}var V=l(w.data.substring(0,c.endNodeIndex),y);return h=N.parentNode,h.insertBefore(m,N),h.insertBefore(z,N),h.removeChild(N),h=w.parentNode,h.insertBefore(V,w),h.insertBefore(d,w),h.removeChild(w),V}},R=function(r){for(var l=r.parentNode;r.childNodes.length>0;)l.insertBefore(r.childNodes[0],r);l.removeChild(r)},ye=function(r){return r.className.indexOf("mce-spellchecker-word")!==-1},$=function(r){var l=e.getElementsByTagName("*"),c=[];r=typeof r=="number"?""+r:null;for(var m=0;m<l.length;m++){var d=l[m],h=d.getAttribute("data-mce-index");h!==null&&h.length&&ye(d)&&(h===r||r===null)&&c.push(d)}return c},F=function(r){for(var l=t.length;l--;)if(t[l]===r)return l;return-1};function be(r){var l=[];return Q(function(c,m){r(c,m)&&l.push(c)}),t=l,this}function Q(r){for(var l=0,c=t.length;l<c&&r(t[l],l)!==!1;l++);return this}function we(r){return t.length&&v(e,t,x(r)),this}function Be(r,l){if(S&&r.global)for(;a=r.exec(S);)t.push(f(a,l));return this}function Y(r){var l,c=$(r?F(r):null);for(l=c.length;l--;)R(c[l]);return this}var Ae=function(r){return t[r.getAttribute("data-mce-index")]},Ee=function(r){return $(F(r))[0]};function Te(r,l,c){return t.push({start:r,end:r+l,text:S.substr(r,l),data:c}),this}var Z=function(r){var l=$(F(r)),c=n.dom.createRng();return c.setStartBefore(l[0]),c.setEndAfter(l[l.length-1]),c},Ce=function(r,l){var c=Z(r);return c.deleteContents(),l.length>0&&c.insertNode(n.dom.doc.createTextNode(l)),c};function Pe(){return t.splice(0,t.length),Y(),this}var S=g(e);return{text:S,matches:t,each:Q,filter:be,reset:Pe,matchFromElement:Ae,elementFromMatch:Ee,find:Be,add:Te,wrap:we,unwrap:Y,replace:Ce,rangeFromMatch:Z,indexOf:F}},M=function(e,n){if(!n.get()){var a=ie(e.getBody(),e);n.set(a)}return n.get()},se=function(e,n,a){return function(t,o,i,s){var p={method:t,lang:a.get()},f="";p[t==="addToDictionary"?"word":"text"]=o,b.each(p,function(g,v){f&&(f+="&"),f+=v+"="+encodeURIComponent(g)}),te.send({url:new ne(n).toAbsolute(L(e)),type:"post",content_type:"application/x-www-form-urlencoded",data:f,success:function(g){var v=JSON.parse(g);if(v)v.error?s(v.error):i(v);else{var x=e.translate("Server response wasn't proper JSON.");s(x)}},error:function(){var g=e.translate("The spelling service was not found: (")+L(e)+e.translate(")");s(g)}})}},H=function(e,n,a,t,o,i,s){var p=ce(e),f=p||se(e,n,a);f.call(e.plugins.spellchecker,t,o,i,s)},U=function(e,n,a,t,o,i){if(!W(e,a,t)){var s=function(f){e.notificationManager.open({text:f,type:"error"}),e.setProgressState(!1),W(e,a,t)},p=function(f){K(e,a,t,o,f)};e.setProgressState(!0),H(e,n,i,"spellcheck",M(e,t).text,p,s),e.focus()}},j=function(e,n,a){e.dom.select("span.mce-spellchecker-word").length||W(e,n,a)},ue=function(e,n,a,t,o,i,s){e.setProgressState(!0),H(e,n,o,"addToDictionary",i,function(){e.setProgressState(!1),e.dom.remove(s,!0),j(e,a,t)},function(p){e.notificationManager.open({text:p,type:"error"}),e.setProgressState(!1)})},X=function(e,n,a,t,o,i){e.selection.collapse(),i?b.each(e.dom.select("span.mce-spellchecker-word"),function(s){s.getAttribute("data-mce-word")===t&&e.dom.remove(s,!0)}):e.dom.remove(o,!0),j(e,n,a)},W=function(e,n,a){var t=e.selection.getBookmark();if(M(e,a).reset(),e.selection.moveToBookmark(t),a.set(null),n.get())return n.set(!1),ae(e),!0},q=function(e){var n=e.getAttribute("data-mce-index");return typeof n=="number"?""+n:n},fe=function(e,n){var a=[],t=b.toArray(e.getBody().getElementsByTagName("span"));if(t.length)for(var o=0;o<t.length;o++){var i=q(t[o]);i===null||!i.length||i===n.toString()&&a.push(t[o])}return a},K=function(e,n,a,t,o){var i=!!o.dictionary,s=o.words;if(e.setProgressState(!1),E(s)){var p=e.translate("No misspellings found.");e.notificationManager.open({text:p,type:"info"}),n.set(!1);return}t.set({suggestions:s,hasDictionarySupport:i});var f=e.selection.getBookmark();M(e,a).find(G(e)).filter(function(g){return!!s[g.text]}).wrap(function(g){return e.dom.create("span",{class:"mce-spellchecker-word","aria-invalid":"spelling","data-mce-bogus":1,"data-mce-word":g.text})}),e.selection.moveToBookmark(f),n.set(!0),re(e)},pe=function(e,n,a,t,o){var i=function(){return G(e)},s=function(p){K(e,n,t,a,p)};return{getTextMatcher:t.get,getWordCharPattern:i,markErrors:s,getLanguage:o.get}},ve=function(e,n,a,t,o,i){e.addCommand("mceSpellCheck",function(){U(e,n,a,t,o,i)})},O=function(){return O=Object.assign||function(n){for(var a,t=1,o=arguments.length;t<o;t++){a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])}return n},O.apply(this,arguments)},D="SpellcheckStart SpellcheckEnd",he=function(e,n){var a=[];return b.each(n,function(t){a.push({selectable:!0,text:t.name,data:t.value})}),a},ge=function(e){return b.map(le(e).split(","),function(n){var a=n.split("=");return{name:a[0],value:a[1]}})},me=function(e,n,a,t,o,i){var s=he("Language",ge(e)),p=function(){U(e,n,a,t,i,o)},f={tooltip:"Spellcheck",onAction:p,icon:"spell-check",onSetup:function(v){var x=function(){v.setActive(a.get())};return e.on(D,x),function(){e.off(D,x)}}},g=O(O({},f),{type:"splitbutton",select:function(v){return v===o.get()},fetch:function(v){var x=b.map(s,function(R){return{type:"choiceitem",value:R.data,text:R.text}});v(x)},onItemAction:function(v,x){o.set(x)}});s.length>1?e.ui.registry.addSplitButton("spellchecker",g):e.ui.registry.addToggleButton("spellchecker",f),e.ui.registry.addToggleMenuItem("spellchecker",{text:"Spellcheck",icon:"spell-check",onSetup:function(v){v.setActive(a.get());var x=function(){v.setActive(a.get())};return e.on(D,x),function(){e.off(D,x)}},onAction:p})},de=!0,ke=function(e,n,a,t,o,i,s,p){var f=[],g=a.get().suggestions[s];b.each(g,function(x){f.push({text:x,onAction:function(){e.insertContent(e.dom.encode(x)),e.dom.remove(p),j(e,t,o)}})});var v=a.get().hasDictionarySupport;return v&&(f.push({type:"separator"}),f.push({text:"Add to dictionary",onAction:function(){ue(e,n,t,o,i,s,p)}})),f.push.apply(f,[{type:"separator"},{text:"Ignore",onAction:function(){X(e,t,o,s,p)}},{text:"Ignore all",onAction:function(){X(e,t,o,s,p,de)}}]),f},xe=function(e,n,a,t,o,i){var s=function(p){var f=p;if(f.className==="mce-spellchecker-word"){var g=fe(e,q(f));if(g.length>0){var v=e.dom.createRng();return v.setStartBefore(g[0]),v.setEndAfter(g[g.length-1]),e.selection.setRng(v),ke(e,n,a,t,o,i,f.getAttribute("data-mce-word"),g)}}else return[]};e.ui.registry.addContextMenu("spellchecker",{update:s})};function Ne(){I.add("spellchecker",function(e,n){if(T(e)===!1){var a=B(!1),t=B(oe(e)),o=B(null),i=B(null);return me(e,n,a,o,t,i),xe(e,n,i,a,o,t),ve(e,n,a,o,i,t),pe(e,a,i,o,t)}})}Ne()})();const Re=De({__proto__:null,default:ee},[ee]);export{Re as i};
