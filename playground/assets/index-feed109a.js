function Cn(N,A){for(var d=0;d<A.length;d++){const p=A[d];if(typeof p!="string"&&!Array.isArray(p)){for(const O in p)if(O!=="default"&&!(O in N)){const b=Object.getOwnPropertyDescriptor(p,O);b&&Object.defineProperty(N,O,b.get?b:{enumerable:!0,get:()=>p[O]})}}}return Object.freeze(Object.defineProperty(N,Symbol.toStringTag,{value:"Module"}))}var Cr={};(function(){var N=function(r){var n=r,t=function(){return n},e=function(o){n=o};return{get:t,set:e}},A=tinymce.util.Tools.resolve("tinymce.PluginManager"),d=function(){return d=Object.assign||function(n){for(var t,e=1,o=arguments.length;e<o;e++){t=arguments[e];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(n[a]=t[a])}return n},d.apply(this,arguments)};function p(r,n,t){if(t||arguments.length===2)for(var e=0,o=n.length,a;e<o;e++)(a||!(e in n))&&(a||(a=Array.prototype.slice.call(n,0,e)),a[e]=n[e]);return r.concat(a||Array.prototype.slice.call(n))}var O=function(r){var n=typeof r;return r===null?"null":n==="object"&&(Array.prototype.isPrototypeOf(r)||r.constructor&&r.constructor.name==="Array")?"array":n==="object"&&(String.prototype.isPrototypeOf(r)||r.constructor&&r.constructor.name==="String")?"string":n},b=function(r){return function(n){return O(n)===r}},R=b("string"),Tr=b("object"),M=b("array"),Q=function(){},h=function(r){return function(){return r}},L=function(r){return r},xr=function(r){return function(){throw new Error(r)}},P=h(!1),C=h(!0),I=function(){return z},z=function(){var r=function(e){return e()},n=L,t={fold:function(e,o){return e()},isSome:P,isNone:C,getOr:n,getOrThunk:r,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:h(null),getOrUndefined:h(void 0),or:n,orThunk:r,map:I,each:Q,bind:I,exists:P,forall:C,filter:function(){return I()},toArray:function(){return[]},toString:h("none()")};return t}(),W=function(r){var n=h(r),t=function(){return o},e=function(a){return a(r)},o={fold:function(a,u){return u(r)},isSome:C,isNone:P,getOr:n,getOrThunk:n,getOrDie:n,getOrNull:n,getOrUndefined:n,or:t,orThunk:t,map:function(a){return W(a(r))},each:function(a){a(r)},bind:e,exists:e,forall:e,filter:function(a){return a(r)?o:z},toArray:function(){return[r]},toString:function(){return"some("+r+")"}};return o},Nr=function(r){return r==null?z:W(r)},s={some:W,none:I,from:Nr},Mr=Array.prototype.slice,Sr=Array.prototype.indexOf,Br=function(r,n){return Sr.call(r,n)},Y=function(r,n){return Br(r,n)>-1},j=function(r,n){for(var t=r.length,e=new Array(t),o=0;o<t;o++){var a=r[o];e[o]=n(a,o)}return e},w=function(r,n){for(var t=0,e=r.length;t<e;t++){var o=r[t];n(o,t)}},Ar=function(r,n){for(var t=r.length-1;t>=0;t--){var e=r[t];n(e,t)}},Z=function(r,n){for(var t=[],e=0,o=r.length;e<o;e++){var a=r[e];n(a,e)&&t.push(a)}return t},G=function(r,n,t){return Ar(r,function(e,o){t=n(t,e,o)}),t},Ir=function(r,n,t){return w(r,function(e,o){t=n(t,e,o)}),t},jr=function(r,n,t){for(var e=0,o=r.length;e<o;e++){var a=r[e];if(n(a,e))return s.some(a);if(t(a,e))break}return s.none()},Dr=function(r,n){return jr(r,n,P)},rr=function(r,n){for(var t=0,e=r.length;t<e;++t){var o=r[t];if(n(o,t)!==!0)return!1}return!0},$r=function(r,n){var t=Mr.call(r,0);return t.sort(n),t},Fr=function(r,n){return n>=0&&n<r.length?s.some(r[n]):s.none()},_r=function(r){return Fr(r,0)},nr=Object.keys,Ur=Object.hasOwnProperty,Lr=function(r,n){return Ur.call(r,n)},zr=function(r){if(!M(r))throw new Error("cases must be an array");if(r.length===0)throw new Error("there must be at least one case");var n=[],t={};return w(r,function(e,o){var a=nr(e);if(a.length!==1)throw new Error("one and only one name per case");var u=a[0],i=e[u];if(t[u]!==void 0)throw new Error("duplicate key detected:"+u);if(u==="cata")throw new Error("cannot have a case named cata (sorry)");if(!M(i))throw new Error("case arguments must be an array");n.push(u),t[u]=function(){for(var f=[],c=0;c<arguments.length;c++)f[c]=arguments[c];var g=f.length;if(g!==i.length)throw new Error("Wrong number of arguments to case "+u+". Expected "+i.length+" ("+i+"), got "+g);var l=function(v){var m=nr(v);if(n.length!==m.length)throw new Error("Wrong number of arguments to match. Expected: "+n.join(",")+`
Actual: `+m.join(","));var E=rr(n,function(q){return Y(m,q)});if(!E)throw new Error("Not all branches were specified when using match. Specified: "+m.join(", ")+`
Required: `+n.join(", "));return v[u].apply(null,f)};return{fold:function(){for(var v=[],m=0;m<arguments.length;m++)v[m]=arguments[m];if(v.length!==r.length)throw new Error("Wrong number of arguments to fold. Expected "+r.length+", got "+v.length);var E=v[o];return E.apply(null,f)},match:l,log:function(v){}}}}),t},Wr={generate:zr};Wr.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);var tr=function(r){var n=[],t=[];return w(r,function(e){e.fold(function(o){n.push(o)},function(o){t.push(o)})}),{errors:n,values:t}},T=function(r){var n=function(l){return T(r)},t=function(l){return T(r)},e=function(l){return T(l(r))},o=function(l){return T(r)},a=function(l){l(r)},u=function(l){return l(r)},i=function(l,v){return v(r)},f=function(l){return l(r)},c=function(l){return l(r)},g=function(){return s.some(r)};return{isValue:C,isError:P,getOr:h(r),getOrThunk:h(r),getOrDie:h(r),or:n,orThunk:t,fold:i,map:e,mapError:o,each:a,bind:u,exists:f,forall:c,toOptional:g}},S=function(r){var n=function(c){return c()},t=function(){return xr(String(r))()},e=L,o=function(c){return c()},a=function(c){return S(r)},u=function(c){return S(c(r))},i=function(c){return S(r)},f=function(c,g){return c(r)};return{isValue:P,isError:C,getOr:L,getOrThunk:n,getOrDie:t,or:e,orThunk:o,fold:f,map:a,mapError:u,each:Q,bind:i,exists:P,forall:C,toOptional:s.none}},Kr=function(r,n){return r.fold(function(){return S(n)},T)},D={value:T,error:S,fromOption:Kr},Vr=function(r){return r.type==="inline-command"||r.type==="inline-format"},Hr=function(r){return r.type==="block-command"||r.type==="block-format"},Jr=function(r){return $r(r,function(n,t){return n.start.length===t.start.length?0:n.start.length>t.start.length?-1:1})},er=function(r){var n=function(a){return D.error({message:a,pattern:r})},t=function(a,u,i){if(r.format!==void 0){var f=void 0;if(M(r.format)){if(!rr(r.format,R))return n(a+" pattern has non-string items in the `format` array");f=r.format}else if(R(r.format))f=[r.format];else return n(a+" pattern has non-string `format` parameter");return D.value(u(f))}else return r.cmd!==void 0?R(r.cmd)?D.value(i(r.cmd,r.value)):n(a+" pattern has non-string `cmd` parameter"):n(a+" pattern is missing both `format` and `cmd` parameters")};if(!Tr(r))return n("Raw pattern is not an object");if(!R(r.start))return n("Raw pattern is missing `start` parameter");if(r.end!==void 0){if(!R(r.end))return n("Inline pattern has non-string `end` parameter");if(r.start.length===0&&r.end.length===0)return n("Inline pattern has empty `start` and `end` parameters");var e=r.start,o=r.end;return o.length===0&&(o=e,e=""),t("Inline",function(a){return{type:"inline-format",start:e,end:o,format:a}},function(a,u){return{type:"inline-command",start:e,end:o,cmd:a,value:u}})}else return r.replacement!==void 0?R(r.replacement)?r.start.length===0?n("Replacement pattern has empty `start` parameter"):D.value({type:"inline-command",start:"",end:r.start,cmd:"mceInsertContent",value:r.replacement}):n("Replacement pattern has non-string `replacement` parameter"):r.start.length===0?n("Block pattern has empty `start` parameter"):t("Block",function(a){return{type:"block-format",start:r.start,format:a[0]}},function(a,u){return{type:"block-command",start:r.start,cmd:a,value:u}})},ar=function(r){if(r.type==="block-command")return{start:r.start,cmd:r.cmd,value:r.value};if(r.type==="block-format")return{start:r.start,format:r.format};if(r.type==="inline-command")return r.cmd==="mceInsertContent"&&r.start===""?{start:r.end,replacement:r.value}:{start:r.start,end:r.end,cmd:r.cmd,value:r.value};if(r.type==="inline-format")return{start:r.start,end:r.end,format:r.format.length===1?r.format[0]:r.format}},or=function(r){return{inlinePatterns:Z(r,Vr),blockPatterns:Jr(Z(r,Hr))}},Xr=function(r){var n=function(e){var o=tr(j(e,er));if(o.errors.length>0){var a=o.errors[0];throw new Error(a.message+`:
`+JSON.stringify(a.pattern,null,2))}r.set(or(o.values))},t=function(){return p(p([],j(r.get().inlinePatterns,ar),!0),j(r.get().blockPatterns,ar),!0)};return{setPatterns:n,getPatterns:t}},qr=typeof window!="undefined"?window:Function("return this;")(),ur=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var t=qr.console;t&&(t.error?t.error.apply(t,r):t.log.apply(t,r))},Qr=[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}],Yr=function(r){var n=r.getParam("textpattern_patterns",Qr,"array");if(!M(n))return ur("The setting textpattern_patterns should be an array"),{inlinePatterns:[],blockPatterns:[]};var t=tr(j(n,er));return w(t.errors,function(e){return ur(e.message,e.pattern)}),or(t.values)},ir=function(r){var n=r.getParam("forced_root_block","p");return n===!1?"":n===!0?"p":n},Zr=tinymce.util.Tools.resolve("tinymce.util.Delay"),fr=tinymce.util.Tools.resolve("tinymce.util.VK"),cr="\uFEFF",Gr="Â ",rn=tinymce.util.Tools.resolve("tinymce.util.Tools"),nn=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),B=tinymce.util.Tools.resolve("tinymce.dom.TextSeeker"),y=function(r,n){return{container:r,offset:n}},k=function(r){return r.nodeType===Node.TEXT_NODE},x=function(r,n,t){if(n&&r.isEmpty(n)&&!t(n)){var e=n.parentNode;r.remove(n),x(r,e,t)}},$=function(r,n,t,e){e===void 0&&(e=!0);var o=n.startContainer.parentNode,a=n.endContainer.parentNode;n.deleteContents(),e&&!t(n.startContainer)&&(k(n.startContainer)&&n.startContainer.data.length===0&&r.remove(n.startContainer),k(n.endContainer)&&n.endContainer.data.length===0&&r.remove(n.endContainer),x(r,o,t),o!==a&&x(r,a,t))},tn=function(r,n){var t=n.get(r);return M(t)&&_r(t).exists(function(e){return Lr(e,"block")})},K=function(r){return r.start.length===0},V=function(r,n){var t=s.from(r.dom.getParent(n.startContainer,r.dom.isBlock));return ir(r)===""?t.orThunk(function(){return s.some(r.getBody())}):t},F=nn.DOM,_=function(r){return function(n){return r===n?-1:0}},en=function(r){return function(n){return r.isBlock(n)||Y(["BR","IMG","HR","INPUT"],n.nodeName)||r.getContentEditable(n)==="false"}},H=function(r,n,t){if(k(r)&&n>=0)return s.some(y(r,n));var e=B(F);return s.from(e.backwards(r,n,_(r),t)).map(function(o){return y(o.container,o.container.data.length)})},an=function(r,n,t){if(k(r)&&n>=r.length)return s.some(y(r,n));var e=B(F);return s.from(e.forwards(r,n,_(r),t)).map(function(o){return y(o.container,0)})},J=function(r,n,t){if(!k(r))return s.none();var e=r.textContent;if(n>=0&&n<=e.length)return s.some(y(r,n));var o=B(F);return s.from(o.backwards(r,n,_(r),t)).bind(function(a){var u=a.container.data;return J(a.container,n+u.length,t)})},sr=function(r,n,t){if(!k(r))return s.none();var e=r.textContent;if(n<=e.length)return s.some(y(r,n));var o=B(F);return s.from(o.forwards(r,n,_(r),t)).bind(function(a){return sr(a.container,n-e.length,t)})},on=function(r,n,t,e,o){var a=B(r,en(r));return s.from(a.backwards(n,t,e,o))},lr=function(r,n,t){if(k(n)&&(t<0||t>n.data.length))return[];for(var e=[t],o=n;o!==r&&o.parentNode;){for(var a=o.parentNode,u=0;u<a.childNodes.length;u++)if(a.childNodes[u]===o){e.push(u);break}o=a}return o===r?e.reverse():[]},X=function(r,n,t,e,o){var a=lr(r,n,t),u=lr(r,e,o);return{start:a,end:u}},vr=function(r,n){var t=n.slice(),e=t.pop(),o=Ir(t,function(a,u){return a.bind(function(i){return s.from(i.childNodes[u])})},s.some(r));return o.bind(function(a){return k(a)&&(e<0||e>a.data.length)?s.none():s.some({node:a,offset:e})})},gr=function(r,n){return vr(r,n.start).bind(function(t){var e=t.node,o=t.offset;return vr(r,n.end).map(function(a){var u=a.node,i=a.offset,f=document.createRange();return f.setStart(e,o),f.setEnd(u,i),f})})},un=function(r,n){return X(r,n.startContainer,n.startOffset,n.endContainer,n.endOffset)},mr=function(r,n,t){var e=an(n,0,n);e.each(function(o){var a=o.container;sr(a,t.start.length,n).each(function(u){var i=r.createRng();i.setStart(a,0),i.setEnd(u.container,u.offset),$(r,i,function(f){return f===n})})})},fn=function(r,n){var t=r.dom,e=n.pattern,o=gr(t.getRoot(),n.range).getOrDie("Unable to resolve path range");return V(r,o).each(function(a){e.type==="block-format"?tn(e.format,r.formatter)&&r.undoManager.transact(function(){mr(r.dom,a,e),r.formatter.apply(e.format)}):e.type==="block-command"&&r.undoManager.transact(function(){mr(r.dom,a,e),r.execCommand(e.cmd,!1,e.value)})}),!0},cn=function(r,n){var t=n.replace(Gr," ");return Dr(r,function(e){return n.indexOf(e.start)===0||t.indexOf(e.start)===0})},sn=function(r,n){var t=r.dom,e=r.selection.getRng();return V(r,e).filter(function(o){var a=ir(r),u=a===""&&t.is(o,"body")||t.is(o,a);return o!==null&&u}).bind(function(o){var a=o.textContent,u=cn(n,a);return u.map(function(i){return rn.trim(a).length===i.start.length?[]:[{pattern:i,range:X(t.getRoot(),o,0,o,0)}]})}).getOr([])},ln=function(r,n){if(n.length!==0){var t=r.selection.getBookmark();w(n,function(e){return fn(r,e)}),r.selection.moveToBookmark(t)}},dr=0,vn=function(r){var n=new Date,t=n.getTime(),e=Math.floor(Math.random()*1e9);return dr++,r+"_"+e+dr+String(t)},gn=function(r,n,t){return n===""||r.length>=n.length&&r.substr(t,t+n.length)===n},mn=function(r,n){return gn(r,n,r.length-n.length)},hr=function(r,n){return r.create("span",{"data-mce-type":"bookmark",id:n})},U=function(r,n){var t=r.createRng();return t.setStartAfter(n.start),t.setEndBefore(n.end),t},pr=function(r,n,t){var e=gr(r.getRoot(),t).getOrDie("Unable to resolve path range"),o=e.startContainer,a=e.endContainer,u=e.endOffset===0?a:a.splitText(e.endOffset),i=e.startOffset===0?o:o.splitText(e.startOffset);return{prefix:n,end:u.parentNode.insertBefore(hr(r,n+"-end"),u),start:i.parentNode.insertBefore(hr(r,n+"-start"),i)}},yr=function(r,n,t){x(r,r.get(n.prefix+"-end"),t),x(r,r.get(n.prefix+"-start"),t)},dn=function(r,n,t){return function(e,o){var a=e.data,u=a.substring(0,o),i=u.lastIndexOf(t.charAt(t.length-1)),f=u.lastIndexOf(t);return f!==-1?f+t.length:i!==-1?i+1:-1}},kr=function(r,n,t,e){var o=n.start,a=on(r,e.container,e.offset,dn(r,t,o),t);return a.bind(function(u){if(u.offset>=o.length){var i=r.createRng();return i.setStart(u.container,u.offset-o.length),i.setEnd(u.container,u.offset),s.some(i)}else{var f=u.offset-o.length;return J(u.container,f,t).map(function(c){var g=r.createRng();return g.setStart(c.container,c.offset),g.setEnd(u.container,u.offset),g}).filter(function(c){return c.toString()===o}).orThunk(function(){return kr(r,n,t,y(u.container,0))})}})},hn=function(r,n,t,e,o,a){if(a===void 0&&(a=!1),n.start.length===0&&!a){var u=r.createRng();return u.setStart(t,e),u.setEnd(t,e),s.some(u)}return H(t,e,o).bind(function(i){var f=kr(r,n,o,i);return f.bind(function(c){if(a){if(c.endContainer===i.container&&c.endOffset===i.offset)return s.none();if(i.offset===0&&c.endContainer.textContent.length===c.endOffset)return s.none()}return s.some(c)})})},pn=function(r,n,t){var e=r.dom,o=e.getRoot(),a=t.pattern,u=t.position.container,i=t.position.offset;return J(u,i-t.pattern.end.length,n).bind(function(f){var c=X(o,f.container,f.offset,u,i);if(K(a))return s.some({matches:[{pattern:a,startRng:c,endRng:c}],position:f});var g=Or(r,t.remainingPatterns,f.container,f.offset,n),l=g.getOr({matches:[],position:f}),v=l.position,m=hn(e,a,v.container,v.offset,n,g.isNone());return m.map(function(E){var q=un(o,E);return{matches:l.matches.concat([{pattern:a,startRng:q,endRng:c}]),position:y(E.startContainer,E.startOffset)}})})},Or=function(r,n,t,e,o){var a=r.dom;return H(t,e,a.getRoot()).bind(function(u){var i=a.createRng();i.setStart(o,0),i.setEnd(t,e);for(var f=i.toString(),c=0;c<n.length;c++){var g=n[c];if(mn(f,g.end)){var l=n.slice();l.splice(c,1);var v=pn(r,o,{pattern:g,remainingPatterns:l,position:u});if(v.isSome())return v}}return s.none()})},br=function(r,n,t){r.selection.setRng(t),n.type==="inline-format"?w(n.format,function(e){r.formatter.apply(e)}):r.execCommand(n.cmd,!1,n.value)},yn=function(r,n,t,e){var o=U(r.dom,t);$(r.dom,o,e),br(r,n,o)},kn=function(r,n,t,e,o){var a=r.dom,u=U(a,e),i=U(a,t);$(a,i,o),$(a,u,o);var f={prefix:t.prefix,start:t.end,end:e.start},c=U(a,f);br(r,n,c)},On=function(r,n){var t=vn("mce_textpattern"),e=G(n,function(o,a){var u=pr(r,t+("_end"+o.length),a.endRng);return o.concat([d(d({},a),{endMarker:u})])},[]);return G(e,function(o,a){var u=e.length-o.length-1,i=K(a.pattern)?a.endMarker:pr(r,t+("_start"+u),a.startRng);return o.concat([d(d({},a),{startMarker:i})])},[])},Pr=function(r,n,t){var e=r.selection.getRng();return e.collapsed===!1?[]:V(r,e).bind(function(o){var a=e.startOffset-(t?1:0);return Or(r,n,e.startContainer,a,o)}).fold(function(){return[]},function(o){return o.matches})},wr=function(r,n){if(n.length!==0){var t=r.dom,e=r.selection.getBookmark(),o=On(t,n);w(o,function(a){var u=t.getParent(a.startMarker.start,t.isBlock),i=function(f){return f===u};K(a.pattern)?yn(r,a.pattern,a.endMarker,i):kn(r,a.pattern,a.startMarker,a.endMarker,i),yr(t,a.endMarker,i),yr(t,a.startMarker,i)}),r.selection.moveToBookmark(e)}},bn=function(r,n){if(!r.selection.isCollapsed())return!1;var t=Pr(r,n.inlinePatterns,!1),e=sn(r,n.blockPatterns);return e.length>0||t.length>0?(r.undoManager.add(),r.undoManager.extra(function(){r.execCommand("mceInsertNewLine")},function(){r.insertContent(cr,{preserve_zwsp:!0}),wr(r,t),ln(r,e);var o=r.selection.getRng(),a=H(o.startContainer,o.startOffset,r.dom.getRoot());r.execCommand("mceInsertNewLine"),a.each(function(u){var i=u.container;i.data.charAt(u.offset-1)===cr&&(i.deleteData(u.offset-1,1),x(r.dom,i.parentNode,function(f){return f===r.dom.getRoot()}))})}),!0):!1},Er=function(r,n){var t=Pr(r,n.inlinePatterns,!0);t.length>0&&r.undoManager.transact(function(){wr(r,t)})},Rr=function(r,n,t){for(var e=0;e<r.length;e++)if(t(r[e],n))return!0;return!1},Pn=function(r,n){return Rr(r,n,function(t,e){return t===e.keyCode&&fr.modifierPressed(e)===!1})},wn=function(r,n){return Rr(r,n,function(t,e){return t.charCodeAt(0)===e.charCode})},En=function(r,n){var t=[",",".",";",":","!","?"],e=[32];r.on("keydown",function(o){o.keyCode===13&&!fr.modifierPressed(o)&&bn(r,n.get())&&o.preventDefault()},!0),r.on("keyup",function(o){Pn(e,o)&&Er(r,n.get())}),r.on("keypress",function(o){wn(t,o)&&Zr.setEditorTimeout(r,function(){Er(r,n.get())})})};function Rn(){A.add("textpattern",function(r){var n=N(Yr(r));return En(r,n),Xr(n)})}Rn()})();const Tn=Cn({__proto__:null,default:Cr},[Cr]);export{Tn as i};
