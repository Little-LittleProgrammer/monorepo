function Pe(C,P){for(var O=0;O<P.length;O++){const y=P[O];if(typeof y!="string"&&!Array.isArray(y)){for(const d in y)if(d!=="default"&&!(d in C)){const h=Object.getOwnPropertyDescriptor(y,d);h&&Object.defineProperty(C,d,h.get?h:{enumerable:!0,get:()=>y[d]})}}}return Object.freeze(Object.defineProperty(C,Symbol.toStringTag,{value:"Module"}))}var J={};(function(){var C=tinymce.util.Tools.resolve("tinymce.PluginManager"),P=function(e){var n=typeof e;return e===null?"null":n==="object"&&(Array.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="Array")?"array":n==="object"&&(String.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="String")?"string":n},O=function(e){return function(n){return P(n)===e}},y=function(e){return function(n){return typeof n===e}},d=O("string"),h=y("function"),Y=function(){},b=function(e){return function(){return e}},j=function(e){return e};function $(e){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];var a=n.concat(r);return e.apply(null,a)}}var M=b(!1),A=b(!0),m=tinymce.util.Tools.resolve("tinymce.util.Tools"),L=tinymce.util.Tools.resolve("tinymce.util.XHR"),V=function(e){return e.getParam("template_cdate_classes","cdate")},B=function(e){return e.getParam("template_mdate_classes","mdate")},K=function(e){return e.getParam("template_selected_content_classes","selcontent")},z=function(e){return e.getParam("template_preview_replace_values")},W=function(e){return e.getParam("content_style","","string")},q=function(e){return e.getParam("content_css_cors",!1,"boolean")},R=function(e){return e.getParam("template_replace_values")},X=function(e){return e.getParam("templates")},Z=function(e){return e.getParam("template_cdate_format",e.translate("%Y-%m-%d"))},U=function(e){return e.getParam("template_mdate_format",e.translate("%Y-%m-%d"))},G=function(e){var n=e.getParam("body_class","","hash");return n[e.id]||""},Q=function(e){var n=e.getParam("body_class","","string");return n.indexOf("=")===-1?n:G(e)},S=function(e,n){if(e=""+e,e.length<n)for(var t=0;t<n-e.length;t++)e="0"+e;return e},_=function(e,n,t){t===void 0&&(t=new Date);var r="Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),o="Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),a="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),l="January February March April May June July August September October November December".split(" ");return n=n.replace("%D","%m/%d/%Y"),n=n.replace("%r","%I:%M:%S %p"),n=n.replace("%Y",""+t.getFullYear()),n=n.replace("%y",""+t.getYear()),n=n.replace("%m",S(t.getMonth()+1,2)),n=n.replace("%d",S(t.getDate(),2)),n=n.replace("%H",""+S(t.getHours(),2)),n=n.replace("%M",""+S(t.getMinutes(),2)),n=n.replace("%S",""+S(t.getSeconds(),2)),n=n.replace("%I",""+((t.getHours()+11)%12+1)),n=n.replace("%p",t.getHours()<12?"AM":"PM"),n=n.replace("%B",""+e.translate(l[t.getMonth()])),n=n.replace("%b",""+e.translate(a[t.getMonth()])),n=n.replace("%A",""+e.translate(o[t.getDay()])),n=n.replace("%a",""+e.translate(r[t.getDay()])),n=n.replace("%%","%"),n},ee=function(e,n){return function(){var t=X(e);h(t)?t(n):d(t)?L.send({url:t,success:function(r){n(JSON.parse(r))}}):n(t)}},k=function(e,n){return m.each(n,function(t,r){h(t)&&(t=t(r)),e=e.replace(new RegExp("\\{\\$"+r+"\\}","g"),t)}),e},E=function(e,n){var t=e.dom,r=R(e);m.each(t.select("*",n),function(o){m.each(r,function(a,l){t.hasClass(o,l)&&h(a)&&a(o)})})},x=function(e,n){return new RegExp("\\b"+n+"\\b","g").test(e.className)},ne=function(e,n,t){var r=e.dom,o=e.selection.getContent();t=k(t,R(e));var a=r.create("div",null,t),l=r.select(".mceTmpl",a);l&&l.length>0&&(a=r.create("div",null),a.appendChild(l[0].cloneNode(!0))),m.each(r.select("*",a),function(g){x(g,V(e).replace(/\s+/g,"|"))&&(g.innerHTML=_(e,Z(e))),x(g,B(e).replace(/\s+/g,"|"))&&(g.innerHTML=_(e,U(e))),x(g,K(e).replace(/\s+/g,"|"))&&(g.innerHTML=o)}),E(e,a),e.execCommand("mceInsertContent",!1,a.innerHTML),e.addVisual()},w=function(){return I},I=function(){var e=function(r){return r()},n=j,t={fold:function(r,o){return r()},isSome:M,isNone:A,getOr:n,getOrThunk:e,getOrDie:function(r){throw new Error(r||"error: getOrDie called on none.")},getOrNull:b(null),getOrUndefined:b(void 0),or:n,orThunk:e,map:w,each:Y,bind:w,exists:M,forall:A,filter:function(){return w()},toArray:function(){return[]},toString:b("none()")};return t}(),N=function(e){var n=b(e),t=function(){return o},r=function(a){return a(e)},o={fold:function(a,l){return l(e)},isSome:A,isNone:M,getOr:n,getOrThunk:n,getOrDie:n,getOrNull:n,getOrUndefined:n,or:t,orThunk:t,map:function(a){return N(a(e))},each:function(a){a(e)},bind:r,exists:r,forall:r,filter:function(a){return a(e)?o:I},toArray:function(){return[e]},toString:function(){return"some("+e+")"}};return o},te=function(e){return e==null?I:N(e)},p={some:N,none:w,from:te},re=function(e,n){for(var t=e.length,r=new Array(t),o=0;o<t;o++){var a=e[o];r[o]=n(a,o)}return r},ae=function(e,n,t){for(var r=0,o=e.length;r<o;r++){var a=e[r];if(n(a,r))return p.some(a);if(t(a,r))break}return p.none()},oe=function(e,n){return ae(e,n,M)},ue=tinymce.util.Tools.resolve("tinymce.Env"),ce=tinymce.util.Tools.resolve("tinymce.util.Promise"),le=Object.hasOwnProperty,se=function(e,n){return ie(e,n)?p.from(e[n]):p.none()},ie=function(e,n){return le.call(e,n)},fe={'"':"&quot;","<":"&lt;",">":"&gt;","&":"&amp;","'":"&#039;"},ve=function(e){return e.replace(/["'<>&]/g,function(n){return se(fe,n).getOr(n)})},pe=function(e,n){if(n.indexOf("<html>")===-1){var t="",r=W(e),o=q(e)?' crossorigin="anonymous"':"";m.each(e.contentCSS,function(c){t+='<link type="text/css" rel="stylesheet" href="'+e.documentBaseURI.toAbsolute(c)+'"'+o+">"}),r&&(t+='<style type="text/css">'+r+"</style>");var a=Q(e),l=e.dom.encode,g=ue.mac?"e.metaKey":"e.ctrlKey && !e.altKey",F='<script>document.addEventListener && document.addEventListener("click", function(e) {for (var elm = e.target; elm; elm = elm.parentNode) {if (elm.nodeName === "A" && !('+g+")) {e.preventDefault();}}}, false);<\/script> ",D=e.getBody().dir,H=D?' dir="'+l(D)+'"':"";n='<!DOCTYPE html><html><head><base href="'+l(e.documentBaseURI.getURI())+'">'+t+F+'</head><body class="'+l(a)+'"'+H+">"+n+"</body></html>"}return k(n,z(e))},ge=function(e,n){var t=function(){if(!n||n.length===0){var c=e.translate("No templates defined.");return e.notificationManager.open({text:c,type:"info"}),p.none()}return p.from(m.map(n,function(u,s){var f=function(i){return i.url!==void 0};return{selected:s===0,text:u.title,value:{url:f(u)?p.from(u.url):p.none(),content:f(u)?p.none():p.from(u.content),description:u.description}}}))},r=function(c){return re(c,function(u){return{text:u.text,value:u.text}})},o=function(c,u){return oe(c,function(s){return s.text===u})},a=function(c){e.windowManager.alert("Could not load the specified template.",function(){return c.focus("template")})},l=function(c){return new ce(function(u,s){c.value.url.fold(function(){return u(c.value.content.getOr(""))},function(f){return L.send({url:f,success:function(i){u(i)},error:function(i){s(i)}})})})},g=function(c,u){return function(s,f){if(f.name==="template"){var i=s.getData().template;o(c,i).each(function(v){s.block("Loading..."),l(v).then(function(T){u(s,v,T)}).catch(function(){u(s,v,""),s.disable("save"),a(s)})})}}},F=function(c){return function(u){var s=u.getData();o(c,s.template).each(function(f){l(f).then(function(i){e.execCommand("mceInsertTemplate",!1,i),u.close()}).catch(function(){u.disable("save"),a(u)})})}},D=function(c){var u=r(c),s=function(v,T){return{title:"Insert Template",size:"large",body:{type:"panel",items:v},initialData:T,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:F(c),onChange:g(c,f)}},f=function(v,T,Te){var Ce=pe(e,Te),Oe=[{type:"selectbox",name:"template",label:"Templates",items:u},{type:"htmlpanel",html:'<p aria-live="polite">'+ve(T.value.description)+"</p>"},{label:"Preview",type:"iframe",name:"preview",sandboxed:!1}],Se={template:T.text,preview:Ce};v.unblock(),v.redial(s(Oe,Se)),v.focus("template")},i=e.windowManager.open(s([],{template:"",preview:""}));i.block("Loading..."),l(c[0]).then(function(v){f(i,c[0],v)}).catch(function(){f(i,c[0],""),i.disable("save"),a(i)})},H=t();H.each(D)},me=function(e){return function(n){ge(e,n)}},ye=function(e){e.addCommand("mceInsertTemplate",$(ne,e)),e.addCommand("mceTemplate",ee(e,me(e)))},de=function(e){e.on("PreProcess",function(n){var t=e.dom,r=U(e);m.each(t.select("div",n.node),function(o){t.hasClass(o,"mceTmpl")&&(m.each(t.select("*",o),function(a){t.hasClass(a,B(e).replace(/\s+/g,"|"))&&(a.innerHTML=_(e,r))}),E(e,o))})})},he=function(e){var n=function(){return e.execCommand("mceTemplate")};e.ui.registry.addButton("template",{icon:"template",tooltip:"Insert template",onAction:n}),e.ui.registry.addMenuItem("template",{icon:"template",text:"Insert template...",onAction:n})};function be(){C.add("template",function(e){he(e),ye(e),de(e)})}be()})();const Me=Pe({__proto__:null,default:J},[J]);export{Me as i};
