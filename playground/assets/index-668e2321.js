function Lr(s,m){for(var f=0;f<m.length;f++){const u=m[f];if(typeof u!="string"&&!Array.isArray(u)){for(const i in u)if(i!=="default"&&!(i in s)){const v=Object.getOwnPropertyDescriptor(u,i);v&&Object.defineProperty(s,i,v.get?v:{enumerable:!0,get:()=>u[i]})}}}return Object.freeze(Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}))}var F={};(function(){var s=function(r){var n=r,e=function(){return n},t=function(o){n=o};return{get:e,set:t}},m=tinymce.util.Tools.resolve("tinymce.PluginManager"),f=function(r){var n=function(){return r.get()};return{isEnabled:n}},u=function(r,n){return r.fire("VisualChars",{state:n})},i=function(r){var n=typeof r;return r===null?"null":n==="object"&&(Array.prototype.isPrototypeOf(r)||r.constructor&&r.constructor.name==="Array")?"array":n==="object"&&(String.prototype.isPrototypeOf(r)||r.constructor&&r.constructor.name==="String")?"string":n},v=function(r){return function(n){return i(n)===r}},A=function(r){return function(n){return typeof n===r}},R=v("string"),W=A("boolean"),I=A("number"),U=function(){},c=function(r){return function(){return r}},G=function(r){return r},y=c(!1),b=c(!0),g=function(){return T},T=function(){var r=function(t){return t()},n=G,e={fold:function(t,o){return t()},isSome:y,isNone:b,getOr:n,getOrThunk:r,getOrDie:function(t){throw new Error(t||"error: getOrDie called on none.")},getOrNull:c(null),getOrUndefined:c(void 0),or:n,orThunk:r,map:g,each:U,bind:g,exists:y,forall:b,filter:function(){return g()},toArray:function(){return[]},toString:c("none()")};return e}(),w=function(r){var n=c(r),e=function(){return o},t=function(a){return a(r)},o={fold:function(a,d){return d(r)},isSome:b,isNone:y,getOr:n,getOrThunk:n,getOrDie:n,getOrNull:n,getOrUndefined:n,or:e,orThunk:e,map:function(a){return w(a(r))},each:function(a){a(r)},bind:t,exists:t,forall:t,filter:function(a){return a(r)?o:T},toArray:function(){return[r]},toString:function(){return"some("+r+")"}};return o},K=function(r){return r==null?T:w(r)},X={some:w,none:g,from:K},q=function(r,n){for(var e=r.length,t=new Array(e),o=0;o<e;o++){var a=r[o];t[o]=n(a,o)}return t},N=function(r,n){for(var e=0,t=r.length;e<t;e++){var o=r[e];n(o,e)}},J=function(r,n){for(var e=[],t=0,o=r.length;t<o;t++){var a=r[t];n(a,t)&&e.push(a)}return e},Q=Object.keys,E=function(r,n){for(var e=Q(r),t=0,o=e.length;t<o;t++){var a=e[t],d=r[a];n(d,a)}};typeof window!="undefined"||Function("return this;")();var Y=3,Z=function(r){return r.dom.nodeType},C=function(r){return r.dom.nodeValue},z=function(r){return function(n){return Z(n)===r}},rr=z(Y),nr=function(r,n,e){if(R(e)||W(e)||I(e))r.setAttribute(n,e+"");else throw console.error("Invalid call to Attribute.set. Key ",n,":: Value ",e,":: Element ",r),new Error("Attribute value was not simple")},S=function(r,n,e){nr(r.dom,n,e)},er=function(r,n){var e=r.dom.getAttribute(n);return e===null?void 0:e},D=function(r,n){r.dom.removeAttribute(n)},O=function(r,n){var e=er(r,n);return e===void 0||e===""?[]:e.split(" ")},tr=function(r,n,e){var t=O(r,n),o=t.concat([e]);return S(r,n,o.join(" ")),!0},or=function(r,n,e){var t=J(O(r,n),function(o){return o!==e});return t.length>0?S(r,n,t.join(" ")):D(r,n),!1},k=function(r){return r.dom.classList!==void 0},ar=function(r){return O(r,"class")},ur=function(r,n){return tr(r,"class",n)},ir=function(r,n){return or(r,"class",n)},cr=function(r,n){k(r)?r.dom.classList.add(n):ur(r,n)},sr=function(r){var n=k(r)?r.dom.classList:ar(r);n.length===0&&D(r,"class")},fr=function(r,n){if(k(r)){var e=r.dom.classList;e.remove(n)}else ir(r,n);sr(r)},vr=function(r,n){var e=n||document,t=e.createElement("div");if(t.innerHTML=r,!t.hasChildNodes()||t.childNodes.length>1)throw console.error("HTML does not have a single root node",r),new Error("HTML must have a single root node");return l(t.childNodes[0])},lr=function(r,n){var e=n||document,t=e.createElement(r);return l(t)},dr=function(r,n){var e=n||document,t=e.createTextNode(r);return l(t)},l=function(r){if(r==null)throw new Error("Node cannot be null or undefined");return{dom:r}},mr=function(r,n,e){return X.from(r.dom.elementFromPoint(n,e)).map(l)},p={fromHtml:vr,fromTag:lr,fromText:dr,fromDom:l,fromPoint:mr},h={" ":"nbsp","­":"shy"},P=function(r,n){var e="";return E(r,function(t,o){e+=o}),new RegExp("["+e+"]",n?"g":"")},gr=function(r){var n="";return E(r,function(e){n&&(n+=","),n+="span.mce-"+e}),n},pr=P(h),hr=P(h,!0),yr=gr(h),$="mce-nbsp",br=function(r){return'<span data-mce-bogus="1" class="mce-'+h[r]+'">'+r+"</span>"},Tr=function(r){var n=C(r);return rr(r)&&n!==void 0&&pr.test(n)},L=function(r,n){var e=[],t=r.dom,o=q(t.childNodes,p.fromDom);return N(o,function(a){n(a)&&(e=e.concat([a])),e=e.concat(L(a,n))}),e},wr=function(r,n){for(;r.parentNode;){if(r.parentNode===n)return r;r=r.parentNode}},Nr=function(r){return r.replace(hr,br)},_=function(r){return r.nodeName.toLowerCase()==="span"&&r.classList.contains("mce-nbsp-wrap")},B=function(r,n){var e=L(p.fromDom(n),Tr);N(e,function(t){var o=t.dom.parentNode;if(_(o))cr(p.fromDom(o),$);else{for(var a=Nr(r.dom.encode(C(t))),d=r.dom.create("div",null,a),x=void 0;x=d.lastChild;)r.dom.insertAfter(x,t.dom);r.dom.remove(t.dom)}})},M=function(r,n){var e=r.dom.select(yr,n);N(e,function(t){_(t)?fr(p.fromDom(t),$):r.dom.remove(t,!0)})},V=function(r){var n=r.getBody(),e=r.selection.getBookmark(),t=wr(r.selection.getNode(),n);t=t!==void 0?t:n,M(r,t),B(r,t),r.selection.moveToBookmark(e)},j=function(r,n){u(r,n.get());var e=r.getBody();n.get()===!0?B(r,e):M(r,e)},Or=function(r,n){n.set(!n.get());var e=r.selection.getBookmark();j(r,n),r.selection.moveToBookmark(e)},kr=function(r,n){r.addCommand("mceVisualChars",function(){Or(r,n)})},Ar=function(r){return r.getParam("visualchars_default_state",!1)},Er=function(r){return r.getParam("forced_root_block")!==!1},Cr=function(r,n){r.on("init",function(){j(r,n)})},Sr=tinymce.util.Tools.resolve("tinymce.util.Delay"),Dr=function(r,n){var e=Sr.debounce(function(){V(r)},300);Er(r)&&r.on("keydown",function(t){n.get()===!0&&(t.keyCode===13?V(r):e())}),r.on("remove",e.stop)},H=function(r,n){return function(e){e.setActive(n.get());var t=function(o){return e.setActive(o.state)};return r.on("VisualChars",t),function(){return r.off("VisualChars",t)}}},Pr=function(r,n){var e=function(){return r.execCommand("mceVisualChars")};r.ui.registry.addToggleButton("visualchars",{tooltip:"Show invisible characters",icon:"visualchars",onAction:e,onSetup:H(r,n)}),r.ui.registry.addToggleMenuItem("visualchars",{text:"Show invisible characters",icon:"visualchars",onAction:e,onSetup:H(r,n)})};function $r(){m.add("visualchars",function(r){var n=s(Ar(r));return kr(r,n),Pr(r,n),Dr(r,n),Cr(r,n),f(n)})}$r()})();const _r=Lr({__proto__:null,default:F},[F]);export{_r as i};
