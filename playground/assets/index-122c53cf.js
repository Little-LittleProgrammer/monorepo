function du(i,l){for(var b=0;b<l.length;b++){const o=l[b];if(typeof o!="string"&&!Array.isArray(o)){for(const E in o)if(E!=="default"&&!(E in i)){const A=Object.getOwnPropertyDescriptor(o,E);A&&Object.defineProperty(i,E,A.get?A:{enumerable:!0,get:()=>o[E]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}var W={};(function(){var i=tinymce.util.Tools.resolve("tinymce.PluginManager"),l=function(u){return u},b=function(){return b=Object.assign||function(a){for(var e,c=1,r=arguments.length;c<r;c++){e=arguments[c];for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(a[t]=e[t])}return a},b.apply(this,arguments)},o="\uFEFF",E=function(u){return u.replace(/\uFEFF/g,"")},A=function(u,a){for(var e=u.length,c=new Array(e),r=0;r<e;r++){var t=u[r];c[r]=a(t,r)}return c},L="[!-#%-*,-\\/:;?@\\[-\\]_{}¡«·»¿;·՚-՟։֊־׀׃׆׳״؉؊،؍؛؞؟٪-٭۔܀-܍߷-߹࠰-࠾࡞।॥॰෴๏๚๛༄-༒༺-༽྅࿐-࿔࿙࿚၊-၏჻፡-፨᐀᙭᙮᚛᚜᛫-᛭᜵᜶។-៖៘-៚᠀-᠊᥄᥅᨞᨟᪠-᪦᪨-᪭᭚-᭠᯼-᯿᰻-᰿᱾᱿᳓‐-‧‰-⁃⁅-⁑⁓-⁞⁽⁾₍₎〈〉❨-❵⟅⟆⟦-⟯⦃-⦘⧘-⧛⧼⧽⳹-⳼⳾⳿⵰⸀-⸮⸰⸱、-〃〈-】〔-〟〰〽゠・꓾꓿꘍-꘏꙳꙾꛲-꛷꡴-꡷꣎꣏꣸-꣺꤮꤯꥟꧁-꧍꧞꧟꩜-꩟꫞꫟꯫﴾﴿︐-︙︰-﹒﹔-﹡﹣﹨﹪﹫！-＃％-＊，-／：；？＠［-］＿｛｝｟-･]",d={aletter:"[A-Za-zªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-׳ؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆༀཀ-ཇཉ-ཬྈ-ྌႠ-Ⴥა-ჺჼᄀ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᨀ-ᨖᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᯀ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⒶ-ⓩⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⴀ-ⴥⴰ-ⵥⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々〻〼ㄅ-ㄭㄱ-ㆎㆠ-ㆺꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐꞑꞠ-ꞩꟺ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚﾠ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]",midnumlet:"[-'\\.‘’․﹒＇．]",midletter:"[:··״‧︓﹕：]",midnum:"[±+*/,;;։،؍٬߸⁄︐︔﹐﹔，；]",numeric:"[0-9٠-٩٫۰-۹߀-߉०-९০-৯੦-੯૦-૯୦-୯௦-௯౦-౯೦-೯൦-൯๐-๙໐-໙༠-༩၀-၉႐-႙០-៩᠐-᠙᥆-᥏᧐-᧙᪀-᪉᪐-᪙᭐-᭙᮰-᮹᱀-᱉᱐-᱙꘠-꘩꣐-꣙꤀-꤉꧐-꧙꩐-꩙꯰-꯹]",cr:"\\r",lf:"\\n",newline:"[\v\f\u2028\u2029]",extend:"[̀-ͯ҃-҉֑-ׇֽֿׁׂׅׄؐ-ًؚ-ٰٟۖ-ۜ۟-۪ۤۧۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ऀ-ःऺ-़ा-ॏ॑-ॗॢॣঁ-ঃ়া-ৄেৈো-্ৗৢৣਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑੰੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୢୣஂா-ூெ-ைொ-்ௗఁ-ఃా-ౄె-ైొ-్ౕౖౢౣಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣംഃാ-ൄെ-ൈൊ-്ൗൢൣංඃ්ා-ුූෘ-ෟෲෳัิ-ฺ็-๎ັິ-ູົຼ່-ໍ༹༘༙༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏႚ-ႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒᝓᝲᝳា-៓៝᠋-᠍ᢩᤠ-ᤫᤰ-᤻ᦰ-ᧀᧈᧉᨗ-ᨛᩕ-ᩞ᩠-᩿᩼ᬀ-ᬄ᬴-᭄᭫-᭳ᮀ-ᮂᮡ-᯦᮪-᯳ᰤ-᰷᳐-᳔᳒-᳨᳭ᳲ᷀-ᷦ᷼-᷿‌‍⃐-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯꙯-꙲꙼꙽꛰꛱ꠂ꠆ꠋꠣ-ꠧꢀꢁꢴ-꣄꣠-꣱ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀ꨩ-ꨶꩃꩌꩍꩻꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꯣ-ꯪ꯬꯭ﬞ︀-️︠-︦ﾞﾟ]",format:"[­؀-؃۝܏឴឵‎‏‪-‮⁠-⁤⁪-⁯\uFEFF￹-￻]",katakana:"[〱-〵゛゜゠-ヺー-ヿㇰ-ㇿ㋐-㋾㌀-㍗ｦ-ﾝ]",extendnumlet:"[=_‿⁀⁔︳︴﹍-﹏＿∀-⋿<>]",punctuation:L},f={ALETTER:0,MIDNUMLET:1,MIDLETTER:2,MIDNUM:3,NUMERIC:4,CR:5,LF:6,NEWLINE:7,EXTEND:8,FORMAT:9,KATAKANA:10,EXTENDNUMLET:11,AT:12,OTHER:13},U=[new RegExp(d.aletter),new RegExp(d.midnumlet),new RegExp(d.midletter),new RegExp(d.midnum),new RegExp(d.numeric),new RegExp(d.cr),new RegExp(d.lf),new RegExp(d.newline),new RegExp(d.extend),new RegExp(d.format),new RegExp(d.katakana),new RegExp(d.extendnumlet),new RegExp("@")],I="",S=new RegExp("^"+d.punctuation+"$"),O=/^\s+$/,T=U,P=f.OTHER,k=function(u){for(var a=P,e=T.length,c=0;c<e;++c){var r=T[c];if(r&&r.test(u)){a=c;break}}return a},_=function(u){var a={};return function(e){if(a[e])return a[e];var c=u(e);return a[e]=c,c}},$=function(u){var a=_(k);return A(u,a)},K=function(u,a){var e=u[a],c=u[a+1];if(a<0||a>u.length-1&&a!==0||e===f.ALETTER&&c===f.ALETTER)return!1;var r=u[a+2];if(e===f.ALETTER&&(c===f.MIDLETTER||c===f.MIDNUMLET||c===f.AT)&&r===f.ALETTER)return!1;var t=u[a-1];return(e===f.MIDLETTER||e===f.MIDNUMLET||c===f.AT)&&c===f.ALETTER&&t===f.ALETTER||(e===f.NUMERIC||e===f.ALETTER)&&(c===f.NUMERIC||c===f.ALETTER)||(e===f.MIDNUM||e===f.MIDNUMLET)&&c===f.NUMERIC&&t===f.NUMERIC||e===f.NUMERIC&&(c===f.MIDNUM||c===f.MIDNUMLET)&&r===f.NUMERIC||e===f.EXTEND||e===f.FORMAT||t===f.EXTEND||t===f.FORMAT||c===f.EXTEND||c===f.FORMAT||e===f.CR&&c===f.LF?!1:e===f.NEWLINE||e===f.CR||e===f.LF||c===f.NEWLINE||c===f.CR||c===f.LF?!0:!(e===f.KATAKANA&&c===f.KATAKANA||c===f.EXTENDNUMLET&&(e===f.ALETTER||e===f.NUMERIC||e===f.KATAKANA||e===f.EXTENDNUMLET)||e===f.EXTENDNUMLET&&(c===f.ALETTER||c===f.NUMERIC||c===f.KATAKANA)||e===f.AT)},p=I,D=O,j=S,X=function(u){return u==="http"||u==="https"},z=function(u,a){var e;for(e=a;e<u.length&&!D.test(u[e]);e++);return e},H=function(u,a){var e=z(u,a+1),c=u.slice(a+1,e).join(p);return c.substr(0,3)==="://"?e:a},Z=function(u,a,e,c){for(var r=[],t=[],n=0;n<e.length;++n)if(t.push(u[n]),K(e,n)){var F=a[n];if((c.includeWhitespace||!D.test(F))&&(c.includePunctuation||!j.test(F))){var s=n-t.length+1,M=n+1,ru=a.slice(s,M).join(p);if(X(ru)){var w=H(a,n),nu=u.slice(M,w);Array.prototype.push.apply(t,nu),n=w}r.push(t)}t=[]}return r},G=function(){return{includeWhitespace:!1,includePunctuation:!1}},Y=function(u,a,e){e=b(b({},G()),e);for(var c=[],r=[],t=0;t<u.length;t++){var n=a(u[t]);n!==o&&(c.push(u[t]),r.push(n))}var F=$(r);return Z(c,r,F,e)},V=Y,q=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),v=function(u,a){for(var e=a.getBlockElements(),c=a.getShortEndedElements(),r=function(s){return e[s.nodeName]||c[s.nodeName]},t=[],n="",F=new q(u,u);u=F.next();)u.nodeType===3?n+=E(u.data):r(u)&&n.length&&(t.push(n),n="");return n.length&&t.push(n),t},J=function(u){return u.replace(/\u200B/g,"")},R=function(u){return u.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"_").length},m=function(u,a){var e=J(v(u,a).join(`
`));return V(e.split(""),l).length},N=function(u,a){var e=v(u,a).join("");return R(e)},h=function(u,a){var e=v(u,a).join("").replace(/\s/g,"");return R(e)},C=function(u,a){return function(){return a(u.getBody(),u.schema)}},g=function(u,a){return function(){return a(u.selection.getRng().cloneContents(),u.schema)}},x=function(u){return C(u,m)},Q=function(u){return{body:{getWordCount:x(u),getCharacterCount:C(u,N),getCharacterCountWithoutSpaces:C(u,h)},selection:{getWordCount:g(u,m),getCharacterCount:g(u,N),getCharacterCountWithoutSpaces:g(u,h)},getCount:x(u)}},uu=function(u,a){u.windowManager.open({title:"Word Count",body:{type:"panel",items:[{type:"table",header:["Count","Document","Selection"],cells:[["Words",String(a.body.getWordCount()),String(a.selection.getWordCount())],["Characters (no spaces)",String(a.body.getCharacterCountWithoutSpaces()),String(a.selection.getCharacterCountWithoutSpaces())],["Characters",String(a.body.getCharacterCount()),String(a.selection.getCharacterCount())]]}]},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}]})},au=function(u,a){u.addCommand("mceWordCount",function(){return uu(u,a)})},y=tinymce.util.Tools.resolve("tinymce.util.Delay"),eu=function(u,a){u.fire("wordCountUpdate",{wordCount:{words:a.body.getWordCount(),characters:a.body.getCharacterCount(),charactersWithoutSpaces:a.body.getCharacterCountWithoutSpaces()}})},B=function(u,a){eu(u,a)},fu=function(u,a,e){var c=y.debounce(function(){return B(u,a)},e);u.on("init",function(){B(u,a),y.setEditorTimeout(u,function(){u.on("SetContent BeforeAddUndo Undo Redo ViewUpdate keyup",c)},0)})},cu=function(u){var a=function(){return u.execCommand("mceWordCount")};u.ui.registry.addButton("wordcount",{tooltip:"Word count",icon:"character-count",onAction:a}),u.ui.registry.addMenuItem("wordcount",{text:"Word count",icon:"character-count",onAction:a})};function tu(u){u===void 0&&(u=300),i.add("wordcount",function(a){var e=Q(a);return au(a,e),cu(a),fu(a,e,u),e})}tu()})();const bu=du({__proto__:null,default:W},[W]);export{bu as i};
